
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Coordinate reference systems &#8212; HealthGIS with Python</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet" />
  <link href="../_static/css/index.c5995385ac14fb8791e8eb36b4908be2.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/sphinx-book-theme.e8f53015daec13862f6db5e763c41738.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.1c5a1a01449ed65a7b51.js">

    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe,.cell"
        const thebe_selector_input = "pre,.cell_input div.highlight"
        const thebe_selector_output = ".output,.cell_output"
    </script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="shortcut icon" href="../_static/logo.jpeg"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
      <img src="../_static/logo.jpeg" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">HealthGIS with Python</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/notebooks/02-coordinate-reference-systems.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/hossainlab/health-gis/"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/hossainlab/health-gis/master?urlpath=tree/book/notebooks/02-coordinate-reference-systems.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        <a class="colab-button" href="https://colab.research.google.com/github/hossainlab/health-gis/blob/master/book/notebooks/02-coordinate-reference-systems.ipynb"><button type="button" class="btn btn-secondary topbarbtn"
                title="Launch Colab" data-toggle="tooltip" data-placement="left"><img class="colab-button-logo"
                    src="../_static/images/logo_colab.png"
                    alt="Interact on Colab">Colab</button></a>
        
        <button type="button" class="btn btn-secondary topbarbtn"
            onclick="initThebeSBT()" title="Launch Thebe" data-toggle="tooltip" data-placement="left"><i
                class="fas fa-play"></i><span style="margin-left: .4em;">Live Code</span></button>
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id1">
   Coordinate reference systems
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#geographic-coordinates">
     Geographic coordinates
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#projected-coordinates">
     Projected coordinates
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#coordinate-reference-systems-in-python-geopandas">
   Coordinate Reference Systems in Python / GeoPandas
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#transforming-to-another-crs">
     Transforming to another CRS
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#why-using-a-different-crs">
     Why using a different CRS?
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#let-s-practice">
   Let’s practice!
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="coordinate-reference-systems">
<h1>Coordinate reference systems<a class="headerlink" href="#coordinate-reference-systems" title="Permalink to this headline">¶</a></h1>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">matplotlib</span> inline
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">geopandas</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">countries</span> <span class="o">=</span> <span class="n">geopandas</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="s2">&quot;zip://./data/ne_110m_admin_0_countries.zip&quot;</span><span class="p">)</span>
<span class="n">cities</span> <span class="o">=</span> <span class="n">geopandas</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="s2">&quot;zip://./data/ne_110m_populated_places.zip&quot;</span><span class="p">)</span>
<span class="n">rivers</span> <span class="o">=</span> <span class="n">geopandas</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="s2">&quot;zip://./data/ne_50m_rivers_lake_centerlines.zip&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id1">
<h2>Coordinate reference systems<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>Up to now, we have used the geometry data with certain coordinates without further wondering what those coordinates mean or how they are expressed.</p>
<blockquote>
<div><p>The <strong>Coordinate Reference System (CRS)</strong> relates the coordinates to a specific location on earth.</p>
</div></blockquote>
<p>For a nice in-depth explanation, see <a class="reference external" href="https://docs.qgis.org/2.8/en/docs/gentle_gis_introduction/coordinate_reference_systems.html">https://docs.qgis.org/2.8/en/docs/gentle_gis_introduction/coordinate_reference_systems.html</a></p>
<div class="section" id="geographic-coordinates">
<h3>Geographic coordinates<a class="headerlink" href="#geographic-coordinates" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Degrees of latitude and longitude.</p>
<p>E.g. 48°51′N, 2°17′E</p>
</div></blockquote>
<p>The most known type of coordinates are geographic coordinates: we define a position on the globe in degrees of latitude and longitude, relative to the equator and the prime meridian.
With this system, we can easily specify any location on earth. It is used widely, for example in GPS. If you inspect the coordinates of a location in Google Maps, you will also see latitude and longitude.</p>
<p><strong>Attention!</strong></p>
<p>in Python we use (lon, lat) and not (lat, lon)</p>
<ul class="simple">
<li><p>Longitude: [-180, 180]1</p></li>
<li><p>Latitude: [-90, 90]1</p></li>
</ul>
</div>
<div class="section" id="projected-coordinates">
<h3>Projected coordinates<a class="headerlink" href="#projected-coordinates" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">(x,</span> <span class="pre">y)</span></code> coordinates are usually in meters or feet</p>
</div></blockquote>
<p>Although the earth is a globe, in practice we usually represent it on a flat surface: think about a physical map, or the figures we have made with Python on our computer screen.
Going from the globe to a flat map is what we call a <em>projection</em>.</p>
<p><img alt="" src="notebooks/img/projection.png" /></p>
<p>We project the surface of the earth onto a 2D plane so we can express locations in cartesian x and y coordinates, on a flat surface. In this plane, we then typically work with a length unit such as meters instead of degrees, which makes the analysis more convenient and effective.</p>
<p>However, there is an important remark: the 3 dimensional earth can never be represented perfectly on a 2 dimensional map, so projections inevitably introduce distortions. To minimise such errors, there are different approaches to project, each with specific advantages and disadvantages.</p>
<p>Some projection systems will try to preserve the area size of geometries, such as the Albers Equal Area projection. Other projection systems try to preserve angles, such as the Mercator projection, but will see big distortions in the area. Every projection system will always have some distortion of area, angle or distance.</p>
<table><tr>
<td> <img src="img/projections-AlbersEqualArea.png"/> </td>
<td> <img src="img/projections-Mercator.png"/> </td>
</tr>
<tr>
<td> <img src="img/projections-Robinson.png"/> </td>
</tr></table><p><strong>Projected size vs actual size (Mercator projection)</strong>:</p>
<p><img alt="" src="notebooks/img/mercator_projection_area.gif" /></p>
</div>
</div>
<div class="section" id="coordinate-reference-systems-in-python-geopandas">
<h2>Coordinate Reference Systems in Python / GeoPandas<a class="headerlink" href="#coordinate-reference-systems-in-python-geopandas" title="Permalink to this headline">¶</a></h2>
<p>A GeoDataFrame or GeoSeries has a <code class="docutils literal notranslate"><span class="pre">.crs</span></code> attribute which holds (optionally) a description of the coordinate reference system of the geometries:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">countries</span><span class="o">.</span><span class="n">crs</span>
</pre></div>
</div>
</div>
</div>
<p>For the <code class="docutils literal notranslate"><span class="pre">countries</span></code> dataframe, it indicates that it uses the EPSG 4326 / WGS84 lon/lat reference system, which is one of the most used for geographic coordinates.</p>
<p>It uses coordinates as latitude and longitude in degrees, as can you be seen from the x/y labels on the plot:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">countries</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">.crs</span></code> attribute is given as a dictionary. In this case, it only indicates the EPSG code, but it can also contain the full “proj4” string (in dictionary form).</p>
<p>Possible CRS representation:</p>
<ul>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">proj4</span></code> string</strong></p>
<p>Example: <code class="docutils literal notranslate"><span class="pre">+proj=longlat</span> <span class="pre">+datum=WGS84</span> <span class="pre">+no_defs</span></code></p>
<p>Or its dict representation: <code class="docutils literal notranslate"><span class="pre">{'proj':</span> <span class="pre">'longlat',</span> <span class="pre">'datum':</span> <span class="pre">'WGS84',</span> <span class="pre">'no_defs':</span> <span class="pre">True}</span></code></p>
</li>
<li><p><strong>EPSG code</strong></p>
<p>Example: <code class="docutils literal notranslate"><span class="pre">EPSG:4326</span></code> = WGS84 geographic CRS (longitude, latitude)</p>
</li>
<li><p>Well-Know-Text (WKT) representation (better support coming with PROJ6 in the next GeoPandas version)</p></li>
</ul>
<p>See eg <a class="reference external" href="https://epsg.io/4326">https://epsg.io/4326</a></p>
<p>Under the hood, GeoPandas uses the <code class="docutils literal notranslate"><span class="pre">pyproj</span></code> / <code class="docutils literal notranslate"><span class="pre">PROJ</span></code> libraries to deal with the re-projections.</p>
<p>For more information, see also <a class="reference external" href="http://geopandas.readthedocs.io/en/latest/projections.html">http://geopandas.readthedocs.io/en/latest/projections.html</a>.</p>
<div class="section" id="transforming-to-another-crs">
<h3>Transforming to another CRS<a class="headerlink" href="#transforming-to-another-crs" title="Permalink to this headline">¶</a></h3>
<p>We can convert a GeoDataFrame to another reference system using the <code class="docutils literal notranslate"><span class="pre">to_crs</span></code> function.</p>
<p>For example, let’s convert the countries to the World Mercator projection (<a class="reference external" href="http://epsg.io/3395">http://epsg.io/3395</a>):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># remove Antartica, as the Mercator projection cannot deal with the poles</span>
<span class="n">countries</span> <span class="o">=</span> <span class="n">countries</span><span class="p">[(</span><span class="n">countries</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">&quot;Antarctica&quot;</span><span class="p">)]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">countries_mercator</span> <span class="o">=</span> <span class="n">countries</span><span class="o">.</span><span class="n">to_crs</span><span class="p">(</span><span class="n">epsg</span><span class="o">=</span><span class="mi">3395</span><span class="p">)</span>  <span class="c1"># or .to_crs({&#39;init&#39;: &#39;epsg:3395&#39;})</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">countries_mercator</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>Note the different scale of x and y.</p>
</div>
<div class="section" id="why-using-a-different-crs">
<h3>Why using a different CRS?<a class="headerlink" href="#why-using-a-different-crs" title="Permalink to this headline">¶</a></h3>
<p>There are sometimes good reasons you want to change the coordinate references system of your dataset, for example:</p>
<ul>
<li><p>Different sources with different CRS -&gt; need to convert to the same crs</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df1</span> <span class="o">=</span> <span class="n">geopandas</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="n">df2</span> <span class="o">=</span> <span class="n">geopandas</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>

<span class="n">df2</span> <span class="o">=</span> <span class="n">df2</span><span class="o">.</span><span class="n">to_crs</span><span class="p">(</span><span class="n">df1</span><span class="o">.</span><span class="n">crs</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>Mapping (distortion of shape and distances)</p></li>
<li><p>Distance / area based calculations -&gt; ensure you use an appropriate projected coordinate system expressed in a meaningful unit such as metres or feet (not degrees).</p></li>
</ul>
<div class="alert alert-info" style="font-size:120%">
<p><strong>ATTENTION:</strong></p>
<p>All the calculations that happen in geopandas and shapely assume that your data is in a 2D cartesian plane, and thus the result of those calculations will only be correct if your data is properly projected.</p>
</div></div>
</div>
<div class="section" id="let-s-practice">
<h2>Let’s practice!<a class="headerlink" href="#let-s-practice" title="Permalink to this headline">¶</a></h2>
<p>Again, we will go back to the Paris datasets. Up to now, we provided the datasets in an appropriate projected CRS for the exercises. But the original data actually were geographic coordinates. In the following exercises, we will start from there.</p>
<hr class="docutils" />
<p>Going back to the Paris districts dataset, this is now provided as a GeoJSON file (<code class="docutils literal notranslate"><span class="pre">&quot;data/paris_districts.geojson&quot;</span></code>) in geographic coordinates.</p>
<p>For converting to projected coordinates, we will use the standard projected CRS for France is the RGF93 / Lambert-93 reference system, referenced by the <code class="docutils literal notranslate"><span class="pre">EPSG:2154</span></code> number (in Belgium this would be Lambert 72, EPSG:31370).</p>
<div class="alert alert-success">
<p><strong>EXERCISE: Projecting a GeoDataFrame</strong></p>
<ul class="simple">
<li><p>Read the districts datasets (<code class="docutils literal notranslate"><span class="pre">&quot;data/paris_districts.geojson&quot;</span></code>) into a GeoDataFrame called <code class="docutils literal notranslate"><span class="pre">districts</span></code>.</p></li>
<li><p>Look at the CRS attribute of the GeoDataFrame. Do you recognize the EPSG number?</p></li>
<li><p>Make a simple plot of the <code class="docutils literal notranslate"><span class="pre">districts</span></code> dataset.</p></li>
<li><p>Calculate the area of all districts.</p></li>
<li><p>Convert the <code class="docutils literal notranslate"><span class="pre">districts</span></code> to a projected CRS (using the <code class="docutils literal notranslate"><span class="pre">EPSG:2154</span></code> for France). Call the new dataset <code class="docutils literal notranslate"><span class="pre">districts_RGF93</span></code>.</p></li>
<li><p>Make a similar plot of <code class="docutils literal notranslate"><span class="pre">districts_RGF93</span></code>.</p></li>
<li><p>Calculate the area of all districts again with <code class="docutils literal notranslate"><span class="pre">districts_RGF93</span></code> (the result will now be expressed in m²).</p></li>
</ul>
<details><summary>Hints</summary>
<ul class="simple">
<li><p>The CRS information is stored in the <code class="docutils literal notranslate"><span class="pre">crs</span></code> attribute of a GeoDataFrame.</p></li>
<li><p>Making a simple plot of a GeoDataFrame can be done with the <code class="docutils literal notranslate"><span class="pre">.plot()</span></code> method.</p></li>
<li><p>Converting to a different CRS can be done with the <code class="docutils literal notranslate"><span class="pre">to_crs()</span></code> method, and the CRS can be specified as an EPSG number using the <code class="docutils literal notranslate"><span class="pre">epsg</span></code> keyword.</p></li>
</ul>
</details>
</div><div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># %load _solved/solutions/02-coordinate-reference-systems1.py</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># %load _solved/solutions/02-coordinate-reference-systems2.py</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># %load _solved/solutions/02-coordinate-reference-systems3.py</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># %load _solved/solutions/02-coordinate-reference-systems4.py</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># %load _solved/solutions/02-coordinate-reference-systems5.py</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># %load _solved/solutions/02-coordinate-reference-systems6.py</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># %load _solved/solutions/02-coordinate-reference-systems7.py</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># %load _solved/solutions/02-coordinate-reference-systems8.py</span>
</pre></div>
</div>
</div>
</div>
<div class="alert alert-success">
<p><strong>EXERCISE:</strong></p>
<p>In the first notebook, we did an exercise on plotting the bike stations locations in Paris and adding a background map to it using the <code class="docutils literal notranslate"><span class="pre">contextily</span></code> package.</p>
<p>Currently, <code class="docutils literal notranslate"><span class="pre">contextily</span></code> assumes that your data is in the Web Mercator projection, the system used by most web tile services. And in that first exercise, we provided the data in the appropriate CRS so you didn’t need to care about this aspect.</p>
<p>However, typically, your data will not come in Web Mercator (<code class="docutils literal notranslate"><span class="pre">EPSG:3857</span></code>) and you will have to align them with web tiles on your own.</p>
<ul class="simple">
<li><p>Read the bike stations datasets (<code class="docutils literal notranslate"><span class="pre">&quot;data/paris_bike_stations.geojson&quot;</span></code>) into a GeoDataFrame called <code class="docutils literal notranslate"><span class="pre">stations</span></code>.</p></li>
<li><p>Convert the <code class="docutils literal notranslate"><span class="pre">stations</span></code> dataset to the Web Mercator projection (<code class="docutils literal notranslate"><span class="pre">EPSG:3857</span></code>). Call the result <code class="docutils literal notranslate"><span class="pre">stations_webmercator</span></code>, and inspect the result.</p></li>
<li><p>Make a plot of this projected dataset (specify the marker size to be 5) and add a background map using <code class="docutils literal notranslate"><span class="pre">contextily</span></code>.</p></li>
</ul>
<details><summary>Hints</summary>
<ul class="simple">
<li><p>Making a simple plot of a GeoDataFrame can be done with the <code class="docutils literal notranslate"><span class="pre">.plot()</span></code> method. This returns a matplotlib axes object.</p></li>
<li><p>The marker size can be specified with the <code class="docutils literal notranslate"><span class="pre">markersize</span></code> keyword if the <code class="docutils literal notranslate"><span class="pre">plot()</span></code> method.</p></li>
<li><p>To add a background map, use the <code class="docutils literal notranslate"><span class="pre">contextily.add_basemap()</span></code> function. It takes the matplotlib <code class="docutils literal notranslate"><span class="pre">ax</span></code> to which to add a map as the first argument.</p></li>
</ul>
</details>
</div><div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># %load _solved/solutions/02-coordinate-reference-systems9.py</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># %load _solved/solutions/02-coordinate-reference-systems10.py</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># %load _solved/solutions/02-coordinate-reference-systems11.py</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "hossainlab/health-gis",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./notebooks"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        
            



<div class='prev-next-bottom'>
    

</div>
        
        </div>
    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Jubayer Hossain<br/>
        
            &copy; Copyright 2021.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="../_static/js/index.1c5a1a01449ed65a7b51.js"></script>

  
  </body>
</html>